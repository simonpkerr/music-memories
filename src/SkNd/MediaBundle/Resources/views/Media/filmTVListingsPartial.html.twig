
{% macro detailsLinkOpeningTag(item, api) %}
<a title="See more details for {{item.ItemAttributes.Title}}" href="{{ path('mediaDetails', {'id':item.ASIN, 'api':api }) }}">
{% endmacro %}


<div class="pagingControls">
{% include "SkNdMediaBundle:Media:pagerPartial.html.twig" 
with 
{
'currentPage':listings.xmlData.Request.ItemSearchRequest.ItemPage,
'pagerParams':pagerParams
} 
%}
</div>    

<ul id="listings">
{% for item in listings.xmlData.Item %}
<li>
    <div>
        {{ _self.detailsLinkOpeningTag(item, api) }}
            <img src="{{item.MediumImage is defined ? item.MediumImage.URL : asset('bundles/SkNd/images/image-placeholder.jpg') }}" alt="{{item.ItemAttributes.Title}}" />
        </a>
        <strong>{{ _self.detailsLinkOpeningTag(item, api) }}{{item.ItemAttributes.Title}}</a></strong>
    </div>
    <ul class="actions">
        <li class="explore-it top-action">
            {{ _self.detailsLinkOpeningTag(item, api) }}Explore</a>
        </li>
        {% include "SkNdUserBundle:MemoryWall:addToMemoryWallListPartial.html.twig" 
        with {
        'api'       : api,
        'itemId'    : item.ASIN,
        'itemTitle' : item.ItemAttributes.Title
        } 
        %}
        <li class="buy-it bottom-action">
            <a href="{{item.DetailPageURL}}" target="_blank" title="Buy it from Amazon">Buy</a>
            <ul>
                <li>
                    <strong><a target="_blank" href="{{item.DetailPageURL}}">Buy this from Amazon {% if item.ItemAttributes.ListPrice is defined %}for {{ item.ItemAttributes.ListPrice.FormattedPrice }}{% endif %}</a></strong>
                    <span class="note">Please note Amazon prices may vary from those specified on noodleDig &ndash; we&rsquo;re not sure why</span>
                      
                </li>
            </ul>
        </li>
    </ul>
</li>
{% endfor %}
</ul>

{% if pagerParams.totalPages > 2 %}
<div class="pagingControls">
{% include "SkNdMediaBundle:Media:pagerPartial.html.twig" 
with 
{
'currentPage':listings.xmlData.Request.ItemSearchRequest.ItemPage,
'pagerParams':pagerParams
} 
%}
</div>        
{% endif %}        
        
{#disclaimer for all film results including tv#}
{% if genre == 'all-genres' %}
<p class="note">Please note that the &lsquo;all&rsquo; Films genre also includes TV listings</p>

{% endif %}

